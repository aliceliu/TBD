<!DOCTYPE html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
    <meta charset="UTF-8">
    <title>Cool Beans</title>
    <link href="/static/base.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <style>
    	html {
    		padding: 0px;
		}

		body {
			padding: 0px;
			margin: 0px;
			margin-top: 20%;
		}

		form {
			margin: 5%;
		}

		textarea {
			width: 100%;
		}

		input[type="checkbox"] {
			text-align: right;
		}

		.expand {
			width: 100%;
			text-align: left;
		}

    </style>
</head>
<body>
	<div class="header">
		Give Recommendation
	</div>
	<form>
		<div id="comment-page">
			<button type="button" class="btn btn-default btn-sm search">
			  <span class="glyphicon glyphicon-search"></span> 
			  <input type="text" name="business" placeholder="Search Business" id="business" class="search">
			  <span class="glyphicon glyphicon-map-marker">
			</button><br>
			<div id="categories"></div>
			<div id="picture"></div>
			<div class="row">
			  <div class="col-xs-2"><img src="https://lh6.ggpht.com/_ljlgBmVDW-mpu1AsLSAfLW0ErxNqFwpxowvsssjSqbEl2kXWUC0tX4Af5uQSiydVY4=w300" width="50px" height="50px"></div>
			  <div class="col-md-8 profile">
			  	<b>Alice Liu</b><br>
					Level: Magic Beans
			  </div>
			</div>


			<textarea name="comment" placeholder="Comment"> </textarea><br>
			
			<span class="glyphicon glyphicon-camera"></span>  
			
		</div>
		<div id="friend-page">
			<button type="button" class="btn btn-default btn-sm search">
			  <span class="glyphicon glyphicon-search"></span> 
			  <input type="text" name="friends" placeholder="Search Friends" id="friends" ></button><br>

			<b>Groups</b><br>
			<button type="button" class="btn btn-default btn-sm expand">
			  <span class="glyphicon glyphicon-chevron-up"></span> 
			  Foodies <input type="checkbox" name="foodies" value="Foodies"><br>
			</button><br>
			
			<button type="button" class="btn btn-default btn-sm expand">
			  <span class="glyphicon glyphicon-chevron-up"></span> 
			  Cafe Study Buddies <input type="checkbox" name="foodies" value="Foodies"><br>
			</button><br>
			
			<button type="button" class="btn btn-default btn-sm expand">
			  <span class="glyphicon glyphicon-chevron-up"></span> 
			  Poor College Kidzz <input type="checkbox" name="foodies" value="Foodies"><br>

			<div class="toggle expand">
				Nicole Won <input type="checkbox" name="foodies" value="Foodies"><br>
				Kevin Casey <input type="checkbox" name="foodies" value="Foodies"><br>
			</div>
			</button><br>

			<b>Friends</b><br>
			Nicole Won <input type="checkbox" name="foodies" value="Foodies"><br>
			Kevin Casey <input type="checkbox" name="foodies" value="Foodies"><br>

			<button type="submit"> Send </button>
		</div>
	</form>
	<div class="footer"> 
		<button type="button" name="back" class="back">
			<span class="glyphicon glyphicon-chevron-left"></span> 
		</button>
		<button type="button" name="next" class="next">
			<span class="glyphicon glyphicon-chevron-right"></span> 
		</button> <br>
	</div>
</body>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
<script>
	$("#friend-page").hide();
	$(".toggle").hide();

	$(".expand").click(function() {
		$(".toggle").toggle();
	});

	$("#business").autocomplete({
      source: function (request, response) { 
                    $.ajax({ 
                        type: "POST", 
                        contentType: "application/json; charset=utf-8", 
                        url: "/autocomplete_yelp", 
                        dataType: "json", 
                        data: "{'q':'" + request.term + "'}", 
                        success: function (data) { 
                                response($.map(data, function (item) { 
                                    return { 
                                        label: item.name, 
                                        value: item.id 
                                    } 
                                })) 
                        } 
                    }); 
                },
      select: function(event, ui) {
        if(ui.item) {
          $.ajax({ 
              type: "POST", 
              contentType: "application/json; charset=utf-8", 
              url: "/autocomplete_yelp_picture", 
              dataType: "json", 
              data: "{'id':'" + ui.item.value + "'}", 
              success: function (data) {
              		if (data.image_url) {
              			$('#picture')[0].innerHTML = '<img id="theImg" src=' + data.rating_img_url + ' /><br>' + '<img id="theImg" src=' + data.image_url + ' />';
              			categories = [];
              			for(var index in data.categories) {
              				categories.push(data.categories[index][0]);
              			}
              			$('#categories')[0].innerHTML = categories.join(', ');
              		}
              }
          	});
          ui.item.value = ui.item.label;
        }
    	}
    });

	$("#friends").autocomplete({
      source: {{friends}}
    });

	var status = 0;
	$(".next").click(function() {
		status = 1;
		$("#friend-page").show()
		$("#comment-page").hide()
	})

	$(".back").click(function() {
		if (status == 0) {
			history.go(-1);
			return true;
		}
		status = 0;
		$("#friend-page").hide()
		$("#comment-page").show()
	})
</script>
</html>