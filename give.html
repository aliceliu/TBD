<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cool Beans</title>
    <link href="/static/base.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <style>
    	html {
    		padding: 0px;
		}

		body {
			padding: 0px;
			margin: 0px;
			margin-top: 20%;
		}

		form {
			margin: 5%;
		}

    </style>
</head>
<body>
	<div class="header">
		Give Recommendation
	</div>
	<form>
		<div id="comment-page">
			<button type="button" class="btn btn-default btn-sm search">
			  <span class="glyphicon glyphicon-search"></span> 
			  <input type="text" name="business" placeholder="Search Business" id="business" class="search">
			  <span class="glyphicon glyphicon-map-marker">
			</button><br>

			<div class="row">
				<div class="col-xs-2">
					<img src="https://lh6.ggpht.com/_ljlgBmVDW-mpu1AsLSAfLW0ErxNqFwpxowvsssjSqbEl2kXWUC0tX4Af5uQSiydVY4=w300" width="50px" height="50px">
				</div>
			  	
			  	<b>Alice Liu</b><br>
					Level: Magic Beans
				
			</div>

			<div id="picture"></div>

			<input type="text" name="comment" placeholder="Comment"> <br>
			
			<span class="glyphicon glyphicon-camera"></span>  
			
		</div>
		<div id="friend-page">
			<button type="button" class="btn btn-default btn-sm">
			  <span class="glyphicon glyphicon-search"></span> 
			  <input type="text" name="friends" placeholder="Search Friends" id="friends"> 
			<button type="submit"> Send </button>
		</div>
	</form>
	<div class="footer"> 
		<button type="button" name="next" class="next">
			<span class="glyphicon glyphicon-chevron-right"></span> 
		</button> <br>
	</div>
</body>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
<script>
	$("#friend-page").hide()

	$("#business").autocomplete({
      source: function (request, response) { 
                    $.ajax({ 
                        type: "POST", 
                        contentType: "application/json; charset=utf-8", 
                        url: "/autocomplete_yelp", 
                        dataType: "json", 
                        data: "{'q':'" + request.term + "'}", 
                        success: function (data) { 
                                response($.map(data, function (item) { 
                                    return { 
                                        label: item.name, 
                                        value: item.id 
                                    } 
                                })) 
                        } 
                    }); 
                },
      select: function(event, ui) {
        if(ui.item) {
          $.ajax({ 
              type: "POST", 
              contentType: "application/json; charset=utf-8", 
              url: "/autocomplete_yelp_picture", 
              dataType: "json", 
              data: "{'id':'" + ui.item.value + "'}", 
              success: function (data) {
              		if (data.image_url) {
              			$('#picture')[0].innerHTML = '<img id="theImg" src=' + data.image_url + ' />';
              		}
              }
          	});
          ui.item.value = ui.item.label;
        }
    	}
    });

	$("#friends").autocomplete({
      source: {{friends}}
    });

	$("#next").click(function() {

		$("#friend-page").show()
		$("#comment-page").hide()
	})
</script>
</html>